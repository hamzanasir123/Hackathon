---
sidebar_label: "Describing Humanoid Robots with URDF"
sidebar_position: 7
title: "Describing Humanoid Robots with URDF"
description: "Understanding URDF structure, links, joints, and how to describe humanoid robots for ROS 2"
---

import ConceptExplainer from '@site/src/components/ConceptExplainer';
import CodeExample from '@site/src/components/CodeExample';
import RosPackageExample from '@site/src/components/RosPackageExample';

# Describing Humanoid Robots with URDF

In this chapter, we'll explore the Unified Robot Description Format (URDF), which is the standard way to describe robot models in ROS. URDF is essential for simulation, visualization, and control of humanoid robots, as it defines the physical structure, kinematics, and dynamics of the robot.

## Learning Objectives

After completing this chapter, you will be able to:

- Understand the structure and components of URDF files
- Define robot links, joints, and their properties
- Create URDF descriptions for humanoid robot components
- Include visual, collision, and inertial properties
- Integrate URDF with ROS 2 for simulation and visualization

## Table of Contents

1. [Introduction to URDF](#introduction-to-urdf)
2. [URDF Structure and Components](#urdf-structure-and-components)
3. [Defining Links and Joints](#defining-links-and-joints)
4. [Visual, Collision, and Inertial Properties](#visual-collision-and-inertial-properties)
5. [Humanoid Robot URDF Example](#humanoid-robot-urdf-example)
6. [URDF with Gazebo Simulation](#urdf-with-gazebo-simulation)
7. [Best Practices](#best-practices)
8. [Exercises](#exercises)

## Introduction to URDF

Unified Robot Description Format (URDF) is an XML-based format used to describe robot models in ROS. It defines the robot's physical structure, including links (rigid parts), joints (connections between links), and properties like mass, visual appearance, and collision properties.

<ConceptExplainer
  title="URDF in Real Life"
  concept="URDF is the standard format for describing robot models in ROS, defining the physical structure and properties."
  analogy="Think of URDF like a blueprint for a robot: just as an architectural blueprint defines the structure of a building with rooms, walls, and connections, URDF defines the structure of a robot with links, joints, and properties."
  examples={[
    "Describing a robot arm with multiple joints",
    "Defining a mobile robot with wheels and sensors",
    "Specifying a humanoid robot with legs, arms, and torso"
  ]}
  relatedConcepts={["ROS 2", "Robot Modeling", "Simulation", "TF"]}
/>

### Why URDF is Important for Humanoid Robots

For humanoid robots, URDF is crucial because:

1. **Kinematic Structure**: It defines the hierarchical structure of the robot body (legs, arms, torso, head)
2. **Joint Limits**: It specifies the range of motion for each joint
3. **Mass Properties**: It defines the mass and center of mass for each link
4. **Simulation**: It provides the necessary information for physics simulation
5. **Visualization**: It describes how the robot should appear in visualization tools

## URDF Structure and Components

A URDF file is an XML document with a specific structure. The root element is `<robot>`, which contains all other elements:

<CodeExample
  title="Basic URDF Structure"
  language="xml"
  code={`<?xml version="1.0" ?>
<robot name="my_robot" xmlns:xacro="http://www.ros.org/wiki/xacro">
  <!-- Define materials -->
  <material name="blue">
    <color rgba="0.0 0.0 0.8 1.0"/>
  </material>

  <!-- Define links -->
  <link name="base_link">
    <visual>
      <geometry>
        <box size="0.5 0.5 0.2"/>
      </geometry>
      <material name="blue"/>
    </visual>
    <collision>
      <geometry>
        <box size="0.5 0.5 0.2"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="1.0"/>
      <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01"/>
    </inertial>
  </link>

  <!-- Define joints -->
  <joint name="base_to_wheel" type="continuous">
    <parent link="base_link"/>
    <child link="wheel_link"/>
    <origin xyz="0.2 0.0 -0.1" rpy="0 0 0"/>
  </joint>

  <link name="wheel_link">
    <visual>
      <geometry>
        <cylinder radius="0.1" length="0.05"/>
      </geometry>
    </visual>
  </link>
</robot>`}
  explanation="Basic URDF structure with a base link and a wheel connected by a continuous joint. The structure includes visual, collision, and inertial properties for the base link."
/>

### Key Components of URDF

1. **Robot**: The root element that contains the entire robot description
2. **Link**: Represents a rigid body with visual, collision, and inertial properties
3. **Joint**: Connects two links with a specific type and kinematic properties
4. **Material**: Defines visual materials with colors
5. **Transmission**: Defines how joints are controlled (not covered in detail here)

## Defining Links and Joints

### Links

A link represents a rigid body in the robot. It can have multiple properties:

<CodeExample
  title="Link Definition with Properties"
  language="xml"
  code={`<link name="upper_arm">
  <!-- Visual properties define how the link appears -->
  <visual>
    <origin xyz="0 0 0.15" rpy="0 0 0"/>
    <geometry>
      <cylinder radius="0.05" length="0.3"/>
    </geometry>
    <material name="light_grey">
      <color rgba="0.7 0.7 0.7 1.0"/>
    </material>
  </visual>

  <!-- Collision properties define collision detection -->
  <collision>
    <origin xyz="0 0 0.15" rpy="0 0 0"/>
    <geometry>
      <cylinder radius="0.05" length="0.3"/>
    </geometry>
  </collision>

  <!-- Inertial properties define physical behavior -->
  <inertial>
    <origin xyz="0 0 0.15" rpy="0 0 0"/>
    <mass value="2.0"/>
    <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.005"/>
  </inertial>
</link>`}
  explanation="A link representing an upper arm with visual, collision, and inertial properties. The origin defines the offset from the joint frame to the geometry center."
/>

### Joint Types

URDF supports several joint types, each appropriate for different types of motion:

<CodeExample
  title="Different Joint Types in URDF"
  language="xml"
  code={`<!-- Revolute joint: Rotates around a single axis with limits -->
<joint name="elbow_joint" type="revolute">
  <parent link="upper_arm"/>
  <child link="forearm"/>
  <origin xyz="0 0 0.3" rpy="0 0 0"/>
  <axis xyz="0 1 0"/>
  <limit lower="-2.0" upper="1.5" effort="100" velocity="1.0"/>
</joint>

<!-- Continuous joint: Rotates around a single axis without limits -->
<joint name="wrist_joint" type="continuous">
  <parent link="forearm"/>
  <child link="hand"/>
  <origin xyz="0 0 0.25" rpy="0 0 0"/>
  <axis xyz="0 1 0"/>
</joint>

<!-- Prismatic joint: Linear motion along an axis -->
<joint name="linear_joint" type="prismatic">
  <parent link="base"/>
  <child link="slider"/>
  <origin xyz="0.1 0 0" rpy="0 0 0"/>
  <axis xyz="1 0 0"/>
  <limit lower="0.0" upper="0.5" effort="100" velocity="0.5"/>
</joint>

<!-- Fixed joint: No motion (rigid connection) -->
<joint name="fixed_joint" type="fixed">
  <parent link="sensor_mount"/>
  <child link="lidar"/>
  <origin xyz="0 0 0.1" rpy="0 0 0"/>
</joint>`}
  explanation="Different joint types with their properties. Revolute joints have position limits, continuous joints have no limits, prismatic joints allow linear motion, and fixed joints create rigid connections."
/>

## Visual, Collision, and Inertial Properties

### Visual Properties

Visual properties define how a link appears in visualization tools:

<CodeExample
  title="Visual Properties Definition"
  language="xml"
  code={`<visual>
  <!-- Origin: offset from joint frame to visual geometry center -->
  <origin xyz="0 0 0" rpy="0 0 0"/>

  <!-- Geometry: shape of the visual representation -->
  <geometry>
    <!-- Available shapes: box, cylinder, sphere, mesh -->
    <mesh filename="package://my_robot_description/meshes/upper_arm.dae"/>
  </geometry>

  <!-- Material: color and appearance -->
  <material name="arm_material">
    <color rgba="0.8 0.8 0.8 1.0"/>
    <!-- Or reference a material defined elsewhere -->
    <!-- <material name="silver"/> -->
  </material>
</visual>`}
  explanation="Visual properties defining the appearance of a link. You can use primitive shapes or mesh files, and apply materials with specific colors."
/>

### Collision Properties

Collision properties define how the link interacts with other objects in simulation:

<CodeExample
  title="Collision Properties Definition"
  language="xml"
  code={`<collision>
  <!-- Origin: offset from joint frame to collision geometry center -->
  <origin xyz="0 0 0" rpy="0 0 0"/>

  <!-- Geometry: shape used for collision detection -->
  <geometry>
    <!-- Often simpler shapes than visual for performance -->
    <cylinder radius="0.06" length="0.3"/>
  </geometry>
</collision>`}
  explanation="Collision properties defining how the link interacts with other objects. Often uses simpler shapes than visual properties for better simulation performance."
/>

### Inertial Properties

Inertial properties define the physical behavior of the link:

<CodeExample
  title="Inertial Properties Definition"
  language="xml"
  code={`<inertial>
  <!-- Origin: offset from joint frame to center of mass -->
  <origin xyz="0.0 0.0 0.15" rpy="0 0 0"/>

  <!-- Mass: mass of the link in kilograms -->
  <mass value="1.5"/>

  <!-- Inertia: moments of inertia (3x3 symmetric matrix) -->
  <inertia
    ixx="0.01" ixy="0.0" ixz="0.0"
    iyy="0.01" iyz="0.0"
    izz="0.005"/>
</inertial>`}
  explanation="Inertial properties defining the physical behavior of the link. The inertia values describe how the link responds to forces and torques."
/>

## Humanoid Robot URDF Example

Let's create a simplified URDF for a humanoid robot's arm as an example:

<CodeExample
  title="Humanoid Robot Arm URDF Example"
  language="xml"
  code={`<?xml version="1.0" ?>
<robot name="humanoid_arm" xmlns:xacro="http://www.ros.org/wiki/xacro">
  <!-- Materials -->
  <material name="black">
    <color rgba="0.0 0.0 0.0 1.0"/>
  </material>
  <material name="blue">
    <color rgba="0.0 0.0 0.8 1.0"/>
  </material>
  <material name="green">
    <color rgba="0.0 0.8 0.0 1.0"/>
  </material>
  <material name="grey">
    <color rgba="0.5 0.5 0.5 1.0"/>
  </material>
  <material name="orange">
    <color rgba="1.0 0.423529411765 0.0392156862745 1.0"/>
  </material>
  <material name="brown">
    <color rgba="0.870588235294 0.811764705882 0.764705882353 1.0"/>
  </material>
  <material name="red">
    <color rgba="0.8 0.0 0.0 1.0"/>
  </material>
  <material name="white">
    <color rgba="1.0 1.0 1.0 1.0"/>
  </material>

  <!-- Base link - attachment point to the torso -->
  <link name="torso">
    <visual>
      <geometry>
        <box size="0.5 0.4 0.6"/>
      </geometry>
      <material name="white"/>
    </visual>
    <collision>
      <geometry>
        <box size="0.5 0.4 0.6"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="5.0"/>
      <inertia ixx="0.1" ixy="0.0" ixz="0.0" iyy="0.1" iyz="0.0" izz="0.1"/>
    </inertial>
  </link>

  <!-- Shoulder joint and link -->
  <joint name="shoulder_pan_joint" type="revolute">
    <parent link="torso"/>
    <child link="shoulder_link"/>
    <origin xyz="0.25 0.0 0.2" rpy="0 0 0"/>
    <axis xyz="0 0 1"/>
    <limit lower="-1.57" upper="1.57" effort="100.0" velocity="1.0"/>
  </joint>

  <link name="shoulder_link">
    <visual>
      <geometry>
        <cylinder radius="0.05" length="0.1"/>
      </geometry>
      <material name="grey"/>
    </visual>
    <collision>
      <geometry>
        <cylinder radius="0.05" length="0.1"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.5"/>
      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.0005"/>
    </inertial>
  </link>

  <!-- Upper arm -->
  <joint name="shoulder_lift_joint" type="revolute">
    <parent link="shoulder_link"/>
    <child link="upper_arm"/>
    <origin xyz="0.0 0.0 0.05" rpy="0 0 0"/>
    <axis xyz="0 1 0"/>
    <limit lower="-2.0" upper="2.0" effort="100.0" velocity="1.0"/>
  </joint>

  <link name="upper_arm">
    <visual>
      <geometry>
        <cylinder radius="0.05" length="0.3"/>
      </geometry>
      <material name="grey"/>
    </visual>
    <collision>
      <geometry>
        <cylinder radius="0.05" length="0.3"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="1.0"/>
      <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.0025"/>
    </inertial>
  </link>

  <!-- Elbow joint and forearm -->
  <joint name="elbow_joint" type="revolute">
    <parent link="upper_arm"/>
    <child link="forearm"/>
    <origin xyz="0.0 0.0 0.3" rpy="0 0 0"/>
    <axis xyz="0 1 0"/>
    <limit lower="-2.5" upper="2.5" effort="100.0" velocity="1.0"/>
  </joint>

  <link name="forearm">
    <visual>
      <geometry>
        <cylinder radius="0.04" length="0.25"/>
      </geometry>
      <material name="grey"/>
    </visual>
    <collision>
      <geometry>
        <cylinder radius="0.04" length="0.25"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.8"/>
      <inertia ixx="0.005" ixy="0.0" ixz="0.0" iyy="0.005" iyz="0.0" izz="0.001"/>
    </inertial>
  </link>

  <!-- Wrist joint and hand -->
  <joint name="wrist_joint" type="revolute">
    <parent link="forearm"/>
    <child link="hand"/>
    <origin xyz="0.0 0.0 0.25" rpy="0 0 0"/>
    <axis xyz="0 0 1"/>
    <limit lower="-1.57" upper="1.57" effort="50.0" velocity="1.0"/>
  </joint>

  <link name="hand">
    <visual>
      <geometry>
        <box size="0.1 0.08 0.05"/>
      </geometry>
      <material name="grey"/>
    </visual>
    <collision>
      <geometry>
        <box size="0.1 0.08 0.05"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.3"/>
      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/>
    </inertial>
  </link>
</robot>`}
  explanation="Complete URDF for a humanoid robot arm with shoulder, upper arm, forearm, and hand. Includes all necessary properties for simulation and visualization."
/>

## URDF with Gazebo Simulation

To use URDF in Gazebo simulation, you need to add Gazebo-specific elements:

<CodeExample
  title="URDF with Gazebo Plugins and Properties"
  language="xml"
  code={`<?xml version="1.0" ?>
<robot name="gazebo_robot">
  <!-- Standard URDF links and joints -->
  <link name="base_link">
    <visual>
      <geometry>
        <box size="0.5 0.5 0.2"/>
      </geometry>
      <material name="blue">
        <color rgba="0.0 0.0 0.8 1.0"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <box size="0.5 0.5 0.2"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="1.0"/>
      <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01"/>
    </inertial>
  </link>

  <!-- Gazebo-specific elements -->
  <gazebo reference="base_link">
    <material>Gazebo/Blue</material>
    <mu1>0.2</mu1>
    <mu2>0.2</mu2>
    <self_collide>false</self_collide>
    <gravity>true</gravity>
  </gazebo>

  <!-- Gazebo plugin for ROS control -->
  <gazebo>
    <plugin name="gazebo_ros_control" filename="libgazebo_ros_control.so">
      <robotNamespace>/my_robot</robotNamespace>
    </plugin>
  </gazebo>

  <!-- Joint state publisher plugin -->
  <gazebo>
    <plugin name="joint_state_publisher" filename="libgazebo_ros_joint_state_publisher.so">
      <jointName>shoulder_pan_joint, shoulder_lift_joint, elbow_joint</jointName>
      <updateRate>30</updateRate>
      <alwaysOn>true</alwaysOn>
    </plugin>
  </gazebo>
</robot>`}
  explanation="URDF with Gazebo-specific elements that define material properties, friction coefficients, and plugins for ROS integration."
/>

## Best Practices

When creating URDF descriptions for humanoid robots, follow these best practices:

1. **Consistent Naming**: Use clear, consistent naming conventions for links and joints
2. **Proper Kinematic Structure**: Ensure the joint hierarchy is correct and forms a valid kinematic tree
3. **Realistic Properties**: Use realistic mass and inertia values based on actual robot specifications
4. **Simplified Collision Models**: Use simpler shapes for collision detection to improve performance
5. **Validation**: Always validate your URDF files for proper syntax and kinematic structure

### Example: Well-Structured URDF

<CodeExample
  title="Well-Structured Humanoid Robot URDF"
  language="xml"
  code={`<?xml version="1.0" ?>
<robot name="humanoid_robot" xmlns:xacro="http://www.ros.org/wiki/xacro">
  <!-- Include other URDF/XACRO files -->
  <xacro:include filename="$(find my_robot_description)/urdf/robot.gazebo"/>

  <!-- Base link -->
  <link name="base_link"/>

  <!-- Torso -->
  <joint name="base_to_torso" type="fixed">
    <parent link="base_link"/>
    <child link="torso"/>
    <origin xyz="0 0 0.5" rpy="0 0 0"/>
  </joint>

  <link name="torso">
    <visual>
      <origin xyz="0 0 0.3" rpy="0 0 0"/>
      <geometry>
        <box size="0.3 0.2 0.6"/>
      </geometry>
      <material name="white">
        <color rgba="1.0 1.0 1.0 1.0"/>
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0.3" rpy="0 0 0"/>
      <geometry>
        <box size="0.3 0.2 0.6"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="0 0 0.3" rpy="0 0 0"/>
      <mass value="10.0"/>
      <inertia ixx="0.5" ixy="0.0" ixz="0.0" iyy="0.6" iyz="0.0" izz="0.2"/>
    </inertial>
  </link>

  <!-- Left Arm (similar structure for right arm) -->
  <joint name="left_shoulder_pan_joint" type="revolute">
    <parent link="torso"/>
    <child link="left_shoulder"/>
    <origin xyz="0.15 0.1 0.4" rpy="0 0 0"/>
    <axis xyz="0 0 1"/>
    <limit lower="-1.57" upper="1.57" effort="100.0" velocity="1.0"/>
    <dynamics damping="0.1" friction="0.0"/>
  </joint>

  <!-- More links and joints would follow -->
  <!-- Each with proper visual, collision, and inertial properties -->
</robot>`}
  explanation="Well-structured URDF with proper naming conventions, realistic properties, and organization. Uses XACRO for modularity and includes proper dynamics parameters."
/>

## Running the Examples

We've created a complete example URDF file for a simple humanoid robot. You can find it in the examples/ros2_packages directory:

<RosPackageExample
  title="URDF Example Package"
  description="Demonstrates URDF for a simple humanoid robot with torso, head, arms, and legs"
  packageName="urdf_example"
  packagePath="/examples/ros2_packages/urdf_example"
  runInstructions={[
    "View the URDF file:",
    "cat examples/ros2_packages/urdf_example/urdf/simple_humanoid.urdf",
    "",
    "Launch the robot visualization:",
    "ros2 launch urdf_example robot_visualization.launch.py"
  ]}
/>

## Exercises


  <h4 className="exercise-title">Exercise 1: Create a Simple Humanoid Leg</h4>
  <p>Create a URDF file for a simple humanoid leg with hip, knee, and ankle joints. Include proper visual, collision, and inertial properties for each link.</p>



  <h4 className="exercise-title">Exercise 2: Humanoid Robot Head</h4>
  <p>Design a URDF for a humanoid robot head with neck joints. Include visual elements for eyes and ensure the head can rotate in multiple directions.</p>



  <h4 className="exercise-title">Exercise 3: Complete Lower Body</h4>
  <p>Create a URDF for a complete humanoid lower body including torso, two legs, and appropriate joints. Make sure to follow proper kinematic structure.</p>



  <h4 className="exercise-title">Exercise 4: Gazebo Integration</h4>
  <p>Add Gazebo-specific elements to your URDF to make it compatible with Gazebo simulation. Include appropriate plugins for joint state publishing and control.</p>
